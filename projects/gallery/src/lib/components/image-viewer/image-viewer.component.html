<ng-container *ngIf="showPrevArrow">
  <ng-container *ngIf="!prevArrowTemplate; else prevArrowTemplate">
    <ngx-chevron-icon class="prev" (click)="prev()"></ngx-chevron-icon>
  </ng-container>
</ng-container>

<ul
  #itemList
  [class.hidden]="imagesHidden"
  [style.transitionDuration]="noAnimation ? '0ms' : ''"
>
  <li *ngIf="!items || !items.length" class="initial-item">
    <div class="loading">
      <div class="animation"></div>
    </div>
  </li>
  <li
    #items
    *ngFor="let item of items; let i = index"
    ondragstart="return false"
    (click)="imageClick.emit($event)"
  >
    <img
      *ngIf="!itemTemplate; else customTemplate"
      [src]="lazyLoading ? '' : item.src"
      [alt]="item.alt"
      [attr.data-src]="lazyLoading ? item.src : ''"
      [class.before-load]="lazyLoading && !item._loaded"
      [style.objectFit]="imageFit"
      (load)="onItemLoaded(item)"
    />
    <ng-template #customTemplate>
      <ng-container
        *ngTemplateOutlet="
          itemTemplate;
          context: {
            index: i,
            selectedIndex: selectedIndex,
            item: item,
            visited: item._visited
          }
        "
      ></ng-container>
    </ng-template>

    <div class="loading" *ngIf="!item._loaded && !itemTemplate">
      <div
        class="animation"
        [class.active]="(item._loading && !item._loaded) || !lazyLoading"
      ></div>
    </div>
  </li>
</ul>

<ng-container *ngIf="showNextArrow">
  <ng-container *ngIf="!nextArrowTemplate; else nextArrowTemplate">
    <ngx-chevron-icon class="next" (click)="next()"></ngx-chevron-icon>
  </ng-container>
</ng-container>

<ngx-image-counter
  *ngIf="imageCounter"
  [itemQuantity]="items?.length"
  [selectedIndex]="selectedIndex"
  [orientation]="imageCounterOrientation"
></ngx-image-counter>
